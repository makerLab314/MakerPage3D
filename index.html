<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MakerLab - 3D Experience</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Import Maps for ES Modules -->
    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/",
            "@mkkellogg/gaussian-splats-3d": "https://cdn.jsdelivr.net/npm/@mkkellogg/gaussian-splats-3d@0.4.6/build/gaussian-splats-3d.module.js"
        }
    }
    </script>
</head>
<body>
    <!-- Landing Page -->
    <div id="landing-page" class="active">
        <div class="glass-window">
            <div class="logo">
                <h1>MakerLab</h1>
                <div class="logo-icon">‚öôÔ∏èüîß</div>
            </div>
            <p class="description">
                Welcome to MakerLab - Your Creative Space for Innovation, 
                3D Printing, and Collaborative Making. Explore our virtual 
                space and discover what we have to offer.
            </p>
            <button id="go-in-btn" class="go-in-button">
                <span>Go In</span>
                <div class="arrow">‚Üí</div>
            </button>
        </div>
        <div class="background-animation"></div>
    </div>

    <!-- Door Entry Scene -->
    <div id="door-scene" class="scene">
        <!-- Video element for door opening -->
        <video id="door-video" class="door-video" playsinline muted preload="auto">
            <source src="door_transition.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    </div>

    <!-- 3D Environment -->
    <div id="three-scene" class="scene">
        <canvas id="three-canvas"></canvas>
        
        <!-- UI Overlay -->
        <div class="ui-overlay">
            <button id="back-btn" class="nav-button">‚Üê Back</button>
            <div class="controls-hint">
                <p>Use WASD or Arrow Keys to move | Mouse drag to look around | Click on objects to interact</p>
            </div>
            
            <!-- WASD Indicator -->
            <div id="wasd-indicator" class="wasd-indicator">
                <div class="wasd-grid">
                    <div class="wasd-spacer"></div>
                    <div class="wasd-key" data-key="w">W</div>
                    <div class="wasd-spacer"></div>
                    <div class="wasd-key" data-key="a">A</div>
                    <div class="wasd-key" data-key="s">S</div>
                    <div class="wasd-key" data-key="d">D</div>
                </div>
            </div>
        </div>

        <!-- Floating HUD (for equipment details) -->
        <div id="floating-hud" class="floating-hud hidden">
            <div class="hud-header">
                <span class="hud-icon" id="hud-icon"></span>
                <h3 id="hud-title"></h3>
                <button class="hud-close" id="close-hud">√ó</button>
            </div>
            <div class="hud-body">
                <div class="hud-scanline"></div>
                <p class="hud-description" id="hud-description"></p>
                <div class="hud-specs" id="hud-specs"></div>
            </div>
            <div class="hud-footer">
                <span class="hud-status">‚óè ACTIVE</span>
            </div>
        </div>

        <!-- Projects View (3D Cards) -->
        <div id="projects-view" class="view-mode hidden">
            <button class="close-btn" id="close-projects">√ó</button>
            <h2>Our Projects</h2>
            <div id="projects-container" class="cards-container"></div>
        </div>

        <!-- Members View (3D Cards) -->
        <div id="members-view" class="view-mode hidden">
            <button class="close-btn" id="close-members">√ó</button>
            <h2>Team Members</h2>
            <div id="members-container" class="cards-container"></div>
        </div>

        <!-- News View -->
        <div id="news-view" class="view-mode hidden">
            <button class="close-btn" id="close-news">√ó</button>
            <h2>Latest News & Updates</h2>
            <div id="news-container" class="news-grid"></div>
        </div>

        <!-- Interactive Markers -->
        <div id="markers-container"></div>
    </div>

    <!-- Easter Egg Modal -->
    <div id="easter-egg-modal" class="modal hidden">
        <div class="modal-content glass-window">
            <button class="close-btn" id="close-easter">√ó</button>
            <h2 id="easter-title"></h2>
            <p id="easter-message"></p>
        </div>
    </div>

    <!-- Loading Screen -->
    <div id="loading-screen">
        <!-- Console Background Effect -->
        <div class="console-background">
            <div class="console-line" id="console-lines"></div>
        </div>
        
        <!-- Warp Effect Container -->
        <div class="warp-container">
            <!-- Video in center -->
            <video id="loading-video" class="loading-video" playsinline muted loop preload="auto">
                <source src="door_transition.mp4" type="video/mp4">
            </video>
            
            <!-- Warp rings -->
            <div class="warp-ring warp-ring-1"></div>
            <div class="warp-ring warp-ring-2"></div>
            <div class="warp-ring warp-ring-3"></div>
            <div class="warp-ring warp-ring-4"></div>
            <div class="warp-ring warp-ring-5"></div>
        </div>
        
        <!-- Loading Info -->
        <div class="loading-info">
            <h2 class="console-title">
                <span class="console-prompt">></span> Initializing MakerLab...
            </h2>
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
                <span class="progress-text" id="progress-text">0%</span>
            </div>
            <div class="console-status" id="console-status">
                <div class="status-line">‚ñ∏ Loading 3D environment...</div>
                <div class="status-line">‚ñ∏ Initializing shaders...</div>
                <div class="status-line">‚ñ∏ Loading assets...</div>
            </div>
            
            <!-- Mobile Warning -->
            <div class="mobile-warning" id="mobile-warning">
                <span class="warning-icon">‚ö†Ô∏è</span>
                <p>Mobile device detected. Loading may consume data. Continue?</p>
                <div class="warning-buttons">
                    <button id="continue-btn" class="warning-button primary">Continue</button>
                    <button id="cancel-btn" class="warning-button">Cancel</button>
                </div>
            </div>
        </div>
        
        <div id="debug-log" style="display: none;"></div>
    </div>

    <script type="module" src="app.js"></script>
</body>
</html>
